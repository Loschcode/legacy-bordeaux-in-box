!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},r={},o={},n={}.hasOwnProperty,i="components/",s=function(t,e){var r=0;e&&(0===e.indexOf(i)&&(r=i.length),e.indexOf("/",r)>0&&(e=e.substring(r,e.indexOf("/",r))));var n=o[t+"/index.js"]||o[e+"/deps/"+t+"/index.js"];return n?i+n.substring(0,n.length-".js".length):t},a=/^\.\.?(\/|$)/,u=function(t,e){for(var r,o=[],n=(a.test(e)?t+"/"+e:e).split("/"),i=0,s=n.length;s>i;i++)r=n[i],".."===r?o.pop():"."!==r&&""!==r&&o.push(r);return o.join("/")},c=function(t){return t.split("/").slice(0,-1).join("/")},p=function(e){return function(r){var o=u(c(e),r);return t.require(o,e)}},l=function(t,e){var o={id:t,exports:{}};return r[t]=o,e(o.exports,p(t),o),o.exports},f=function(t,o){var i=u(t,".");if(null==o&&(o="/"),i=s(t,o),n.call(r,i))return r[i].exports;if(n.call(e,i))return l(i,e[i]);var a=u(i,"./index");if(n.call(r,a))return r[a].exports;if(n.call(e,a))return l(a,e[a]);throw new Error('Cannot find module "'+t+'" from "'+o+'"')};f.alias=function(t,e){o[e]=t},f.register=f.define=function(t,r){if("object"==typeof t)for(var o in t)n.call(t,o)&&(e[o]=t[o]);else e[t]=r},f.list=function(){var t=[];for(var r in e)n.call(e,r)&&t.push(r);return t},f.brunch=!0,f._cache=r,t.require=f}}(),require.register("boot",function(t,e,r){var o,n,i;switch(n=e("bootstrap/default"),o=e("bootstrap/admin"),i=e("bootstrap/masterbox"),$("input, textarea").placeholder(),"production"===_.getEnvironment()&&(console.log=function(){}),_.getApp()){case"masterbox":new n,new i;break;case"masterbox-admin":new n,new o;break;case"company-admin":new n,new o}}),require.register("bootstrap/admin",function(t,e,r){var o,n,i;n=e("libraries/admin-sidebar"),i=e("config"),o=function(){function t(){this.sidebar(),this.modal(),this.datatable(),this.deleteConfirm(),this.confirm(),this.markdownEditor()}return t.prototype.sidebar=function(){return new n},t.prototype.modal=function(){return $.modal.defaults={escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal",spinnerHtml:'<i class="fa fa-refresh fa-spin"></i>',showSpinner:!0,fadeDuration:null,fadeDelay:1},$("[data-modal]").on("click",function(t){return t.preventDefault(),$(this).modal()})},t.prototype.datatable=function(){return $(".js-datatable-simple").DataTable({length:!1,language:i.datatable.language.fr,aaSorting:[]})},t.prototype.deleteConfirm=function(){return $(document).on("click",".js-confirm-delete",function(t){return t.preventDefault(),swal({type:"warning",title:"Es-tu sûr ?",text:"La ressource sera supprimé définitivement",showCancelButton:!0,confirmButtonText:"Oui je suis sûr",cancelButtonText:"Annuler",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(t){return function(){return window.location.href=$(t).attr("href")}}(this))})},t.prototype.confirm=function(){return $(document).on("click",".js-confirm",function(t){return t.preventDefault(),swal({type:"warning",title:"Es-tu sûr ?",text:$(this).data("confirm-text"),showCancelButton:!0,confirmButtonText:"Oui je suis sûr",cancelButtonText:"Annuler",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(t){return function(){return window.location.href=$(t).attr("href")}}(this))})},t.prototype.markdownEditor=function(){return $(".js-markdown").length>0?new SimpleMDE({element:$(".js-markdown")[0],spellChecker:!1}):void 0},t}(),r.exports=o}),require.register("bootstrap/default",function(t,e,r){var o,n=function(t,e){return function(){return t.apply(e,arguments)}};o=function(){function t(){this.textareaAutosize=n(this.textareaAutosize,this),this.processStickyFooter=n(this.processStickyFooter,this),this.stickyFooter=n(this.stickyFooter,this),this.getNotificationErrorMessage=n(this.getNotificationErrorMessage,this),this.hasNotificationErrorMessage=n(this.hasNotificationErrorMessage,this),this.notificationErrorMessage=n(this.notificationErrorMessage,this),this.hasNotificationSuccessMessage=n(this.hasNotificationSuccessMessage,this),this.getNotificationSuccessMessage=n(this.getNotificationSuccessMessage,this),this.notificationSuccessMessage=n(this.notificationSuccessMessage,this),this.processNotifications=n(this.processNotifications,this),this.notificationFormErrors(),this.processNotifications(),this.chosenSelect(),this.labelautyForm(),this.tooltipster(),this.inputMaskDate(),this.stickyFooter(),this.textareaAutosize()}return t.prototype.notificationFormErrors=function(){var t,e,r,o,n;return t=_.trim($("#gotham").data("form-errors")),_.isEmpty(t)||"1"!==t?void 0:(n=_.trim($("#gotham").data("form-errors-title")),r=_.trim($("#gotham").data("form-errors-text")),o=_.isEmpty(n)?"Attention":n,e=_.isEmpty(r)?"Des erreurs sont présentes dans le formulaire":r,swal({title:o,text:e,type:"error",confirmButtonColor:"#D83F66",html:!0,timer:1750}))},t.prototype.processNotifications=function(){var t;return this.hasNotificationErrorMessage()&&this.hasNotificationSuccessMessage()?(t=this.notificationSuccessMessage,this.notificationErrorMessage(t)):(this.notificationErrorMessage(),this.notificationSuccessMessage())},t.prototype.notificationSuccessMessage=function(t){var e;return e=this.getNotificationSuccessMessage(),_.isEmpty(e)?void 0:_.isFunction(t)?swal({title:"Succès",text:e,type:"success",confirmButtonColor:"#A5DC86",html:!0},function(){return t()}):swal({title:"Succès",text:e,type:"success",confirmButtonColor:"#A5DC86",html:!0})},t.prototype.getNotificationSuccessMessage=function(){return _.trim($("#gotham").data("success-message"))},t.prototype.hasNotificationSuccessMessage=function(){var t;return t=this.getNotificationSuccessMessage(),_.isEmpty(t)?!1:!0},t.prototype.notificationErrorMessage=function(t){return this.hasNotificationErrorMessage()?_.isFunction(t)?swal({title:"Erreur",text:this.getNotificationErrorMessage(),type:"error",confirmButtonColor:"#D83F66",html:!0,closeOnConfirm:!1},function(){return t()}):swal({title:"Erreur",text:this.getNotificationErrorMessage(),type:"error",confirmButtonColor:"#D83F66",html:!0,timer:4e3}):void 0},t.prototype.hasNotificationErrorMessage=function(){var t;return t=this.getNotificationErrorMessage(),_.isEmpty(t)?!1:!0},t.prototype.getNotificationErrorMessage=function(){return _.trim($("#gotham").data("error-message"))},t.prototype.chosenSelect=function(){var t;return t={disable_search_threshold:30},$(".js-chosen").each(function(){var e;return e=this.hasAttribute("data-width")?_.merge({},t,{width:$(this).data("width")}):t,$(this).chosen(e)})},t.prototype.labelautyForm=function(){return $(":checkbox").labelauty(),$(":radio").labelauty()},t.prototype.tooltipster=function(){return $(".js-tooltip").tooltipster()},t.prototype.inputMaskDate=function(){return $(".js-input-mask-date").inputmask("99/99/9999")},t.prototype.stickyFooter=function(){return $(".js-footer-stick").length>0?(this.processStickyFooter(),$(window).resize(function(t){return function(){return t.processStickyFooter()}}(this))):void 0},t.prototype.processStickyFooter=function(){var t,e,r;return t=$(window).height(),e=$(".js-footer-stick").height(),r=$(".js-footer-stick").position().top+e,t>r?$(".js-footer-stick").css("margin-top",10+(t-r)+"px"):void 0},t.prototype.textareaAutosize=function(){return $("textarea").textareaAutoSize()},t}(),r.exports=o}),require.register("bootstrap/masterbox",function(t,e,r){var o;o=function(){function t(){this.responsiveMenu()}return t.prototype.responsiveMenu=function(){return $(".js-menu-sidebar").length>0?$(".js-menu-sidebar").slicknav({label:"SECTIONS"}):$(".js-menu").slicknav()},t}(),r.exports=o}),require.register("config",function(t,e,r){r.exports={stripe:{testing:"pk_test_HNPpbWh3FV4Lw4RmIQqirqsj",production:"pk_live_EhCVbntIqph3ppfNCiN6wq3x"},datatable:{language:{fr:{sProcessing:"Traitement en cours...",sSearch:"Rechercher&nbsp;:",sLengthMenu:"Afficher _MENU_ &eacute;l&eacute;ments",sInfo:"Affichage de l'&eacute;l&eacute;ment _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",sInfoEmpty:"Affichage de l'&eacute;l&eacute;ment 0 &agrave; 0 sur 0 &eacute;l&eacute;ment",sInfoFiltered:"(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",sInfoPostFix:"",sLoadingRecords:'<i class="fa fa-spinner fa-spin"></i> Chargement en cours...',sZeroRecords:"Aucun &eacute;l&eacute;ment &agrave; afficher",sEmptyTable:"Aucune donn&eacute;e disponible dans le tableau",oPaginate:{sFirst:"Premier",sPrevious:"Pr&eacute;c&eacute;dent",sNext:"Suivant",sLast:"Dernier"},oAria:{sSortAscending:": activer pour trier la colonne par ordre croissant",sSortDescending:": activer pour trier la colonne par ordre d&eacute;croissant"}}}}}}),require.register("controllers/example-controller",function(t,e,r){var o,n,i=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=e("core/controller"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.before=function(){},e.prototype.run=function(){},e}(o),r.exports=n}),require.register("controllers/masterbox/admin/customers/index",function(t,e,r){var o,n,i,s=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function r(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=e("core/controller"),o=e("config"),i=function(t){function e(){return this.displayMore=s(this.displayMore,this),e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.before=function(){return this.table=$("table").DataTable({length:!1,language:o.datatable.language.fr,ajax:$("table").data("request"),processing:!0,serverSide:!0,order:[[1,"asc"]],columns:[{orderable:!1,className:"more-details",data:null,defaultContent:'<a href="#" class="button button__table"><i class="fa fa-plus-square-o"></i></a>'},{data:"id"},{data:"full_name"},{data:"email"},{data:"phone_format"},{render:function(t){return function(e,r,o,n){var i;return i={focus_profile:_.slash($("table").data("focus-profile"))},t.view("masterbox.admin.customers.render_subscriptions",_.extend(i,o))}}(this)},{render:function(t,e,r,o){return _.euro(r.turnover)}},{data:"city"},{data:"zip"},{data:"address"},{sortable:!1,render:function(t){return function(e,r,o,n){var i;return i={link_edit:_.slash($("table").data("edit-customer"))+o.id,link_focus:_.slash($("table").data("focus-customer"))+o.id},t.view("masterbox.admin.customers.actions",i)}}(this)}]})},e.prototype.run=function(){return this.delayed("click",".more-details",this.displayMore)},e.prototype.displayMore=function(t){var e,r,o,n;return t.preventDefault(),n=$(t.currentTarget).closest("tr"),o=this.table.row(n),o.child.isShown()?(o.child.hide(),n.find(".more-details i").removeClass("fa-minus-square-o").addClass("fa-plus-square-o")):(e=o.data(),e.focus_profile=$("table").data("focus-profile"),r=this.view("masterbox.admin.customers.more",e),o.child(r).show(),n.find(".more-details i").removeClass("fa-plus-square-o").addClass("fa-minus-square-o"))},e}(n),r.exports=i}),require.register("controllers/masterbox/admin/profiles/index",function(t,e,r){var o,n,i,s=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function r(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=e("core/controller"),o=e("config"),i=function(t){function e(){return this.displayMore=s(this.displayMore,this),e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.before=function(){return this.table=$("table").DataTable({length:!1,language:o.datatable.language.fr,ajax:$("table").data("request"),processing:!0,serverSide:!0,order:[[1,"asc"]],columns:[{orderable:!1,className:"more-details",data:null,defaultContent:'<a href="#" class="button button__table"><i class="fa fa-plus-square-o"></i></a>'},{data:"id"},{data:"contract_id"},{data:this.dataCustomer},{data:this.dataCountOrdersNotSent},{data:this.dataCountPaymentsDone},{data:"readable_status"},{data:"readable_priority"},{data:"created_at"},{sortable:!1,render:function(t){return function(e,r,o,n){var i;return console.log(o),i={link_focus:_.slash($("table").data("focus-profile"))+o.id,link_delete:_.slash($("table").data("delete-profile"))+o.id},t.view("masterbox.admin.profiles.actions",i)}}(this)}]})},e.prototype.run=function(){return this.delayed("click",".more-details",this.displayMore)},e.prototype.displayMore=function(t){var e,r,o,n;return t.preventDefault(),n=$(t.currentTarget).closest("tr"),o=this.table.row(n),o.child.isShown()?(o.child.hide(),n.find(".more-details i").removeClass("fa-minus-square-o").addClass("fa-plus-square-o")):(e=o.data(),r=this.view("masterbox.admin.profiles.more",e),o.child(r).show(),n.find(".more-details i").removeClass("fa-plus-square-o").addClass("fa-minus-square-o"))},e.prototype.dataCustomer=function(t,e,r,o){var n;return n=_.slash($("table").data("focus-customer"))+t.customer.id,'<a class="button button__default --table --green" href="'+n+'">'+t.customer.full_name+"</a>"},e.prototype.dataCountOrdersNotSent=function(t,e,r,o){var n,i;return n=t.orders,i=0,_.forEach(n,function(t,e){return null===t.date_sent?i++:void 0}),i},e.prototype.dataCountPaymentsDone=function(t,e,r,o){return t.payments.length},e}(n),r.exports=i}),require.register("controllers/masterbox/admin/profiles/payments",function(t,e,r){var o,n,i,s=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function r(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=e("core/controller"),o=e("config"),i=function(t){function e(){return this.displayMore=s(this.displayMore,this),e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.before=function(){return this.table=$("table").DataTable({length:!1,language:o.datatable.language.fr,order:[[1,"asc"]]})},e.prototype.run=function(){return this.delayed("click",".js-more",this.displayMore)},e.prototype.displayMore=function(t){var e,r,o,n;return t.preventDefault(),n=$(t.currentTarget).closest("tr"),o=this.table.row(n),o.child.isShown()?(o.child.hide(),n.find(".more-details i").removeClass("fa-minus-square-o").addClass("fa-plus-square-o")):(e={stripe_customer:n.data("stripe-customer"),stripe_event:n.data("stripe-event"),stripe_charge:n.data("stripe-charge"),stripe_card:n.data("stripe-card")},r=this.view("masterbox.admin.profiles.payments.more",e),o.child(r).show(),n.find(".more-details i").removeClass("fa-plus-square-o").addClass("fa-minus-square-o"))},e}(n),r.exports=i}),require.register("controllers/masterbox/customer/profile/index",function(t,e,r){var o,n,i=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=e("core/controller"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.before=function(){return window.location.hash&&$(window.location.hash).length>0?smoothScroll.animateScroll(null,window.location.hash):void 0},e.prototype.run=function(){return this.hasProvider()||(this.on("submit","#form-edit-email",this.askPassword),this.on("submit","#form-edit-password",this.askPassword),this.on("submit","#form-edit-billing",this.askPassword),this.on("submit","#form-edit-destination",this.askPassword),this.on("submit","#form-edit-spot",this.askPassword)),this.on("click","label",this.displayGoogleMap)},e.prototype.displayGoogleMap=function(){var t;return $("[id^=gmap]").addClass("+hidden"),t=$(this).attr("for"),$("#gmap-"+t).hasClass("+hidden")?$("#gmap-"+t).stop().hide().removeClass("+hidden").fadeIn():void 0},e.prototype.hasProvider=function(){var t;return t=_.trim($("#gotham").data("has-provider")),_.isEmpty(t)?!1:"1"===t?!0:!1},e.prototype.askPassword=function(t){return t.preventDefault(),swal({title:"Mot de passe",text:"Veuillez renseigner votre mot de passe",type:"input",confirmButtonColor:"#D83F66",showCancelButton:!0,cancelButtonText:"Annuler",closeOnConfirm:!1,showLoaderOnConfirm:!0,inputType:"password"},function(t){return function(e){return e===!1?!1:""===e?(swal.showInputError("Le mot de passe est requis"),!1):($(t).find("[name=old_password]").val(e),$(t).off("submit").submit())}}(this))},e}(o),r.exports=n}),require.register("controllers/masterbox/customer/profile/order",function(t,e,r){var o,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function r(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=e("core/controller"),n=function(t){function e(){return this.askPassword=i(this.askPassword,this),this.generateStripeToken=i(this.generateStripeToken,this),this.submitCard=i(this.submitCard,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.before=function(){return this.initCard(),Stripe.setPublishableKey(_.getStripeKey()),window.location.hash&&$(window.location.hash).length>0?smoothScroll.animateScroll(null,window.location.hash):void 0},e.prototype.run=function(){return this.on("submit","#form-edit-card",this.submitCard)},e.prototype.initCard=function(){var t,e;return t=_.trim($("#gotham").data("card-last-digits")),e=_.isEmpty(t)?"**** **** **** ****":"**** **** **** "+t,new Card({form:"#form-edit-card",container:".card",debug:!1,formSelectors:{numberInput:"[name=card]",expiryInput:"[name=expiration]",cvcInput:"[name=ccv]"},messages:{validDate:"EXPIRE\nA FIN",monthYear:"MM/AA"},placeholders:{name:"",number:e}})},e.prototype.submitCard=function(t){var e,r,o,n;return t.preventDefault(),o=new Syphon,e=o.exclude("_token").get("#form-edit-card"),this.cleanErrors(e),this.cleanErrorStripe(),r={card:"required|valid_card_number",expiration:"required|valid_card_expiry",ccv:"required|valid_card_cvc"},n=new Validator,n.make(e,r),n.fails()?this.displayErrors(e,n):this.generateStripeToken()},e.prototype.generateStripeToken=function(){var t,e;return e=new Syphon,t=e.exclude("_token").get("#form-edit-card"),this.displayLoader(),Stripe.card.createToken({number:t.card,cvc:t.ccv,exp_month:_.trim(t.expiration.split("/")[0]),exp_year:_.trim(t.expiration.split("/")[1])},function(t){return function(e,r){return console.log(r),t.hideLoader(),200!==e?void t.displayErrorStripe(r):($("[name=stripeToken]").val(r.id),t.askPassword())}}(this))},e.prototype.askPassword=function(){return swal({title:"Mot de passe",text:"Veuillez renseigner votre mot de passe",type:"input",confirmButtonColor:"#D83F66",showCancelButton:!0,cancelButtonText:"Annuler",closeOnConfirm:!1,showLoaderOnConfirm:!0,inputType:"password"},function(t){return function(t){return t===!1?!1:""===t?(swal.showInputError("Le mot de passe est requis"),!1):($("#form-edit-card").find("[name=old_password]").val(t),$("#form-edit-card").get(0).submit())}}(this))},e.prototype.displayLoader=function(){return $("#commit").prop("disabled",!0).addClass("--disabled")},e.prototype.hideLoader=function(){return $("#commit").prop("disabled",!1).removeClass("--disabled")},e.prototype.displayErrorStripe=function(t){return $("#error-stripe").text("Un problème est survenue, veuillez vérifier votre saisie.")},e.prototype.cleanErrorStripe=function(){return $("#error-stripe").text("")},e.prototype.displayErrors=function(t,e){return _.forEach(t,function(t,r){return e.errors.has(r)&&$("#errors-"+r).length>0?$("#errors-"+r).text(e.errors.first(r)):void 0})},e.prototype.cleanErrors=function(t){return _.forEach(t,function(t,e){return $("#errors-"+e).length>0?$("#errors-"+e).text(""):void 0})},e}(o),r.exports=n}),require.register("controllers/masterbox/customer/profile/orders",function(t,e,r){var o,n,i=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=e("core/controller"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.before=function(){return $("tr[data-href]").tooltipster({position:"right",theme:"tooltipster-default"})},e.prototype.run=function(){return this.on("click","tr[data-href]",this.rowClicked)},e.prototype.rowClicked=function(t){return t.preventDefault(),window.location.href=$(this).data("href")},e}(o),r.exports=n}),require.register("controllers/masterbox/customer/purchase/billing-address",function(t,e,r){var o,n,i=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=e("core/controller"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.before=function(){},e.prototype.run=function(){return this.on("click","#copy",this.copyFormDestination)},e.prototype.copyFormDestination=function(t){var e;return t.preventDefault(),e=["city","zip","address"],_.each(e,function(t){return function(t){var e;return e=$("[name=destination_"+t+"]").val(),$("[name=billing_"+t+"]").val(e)}}(this))},e}(n),r.exports=o}),require.register("controllers/masterbox/customer/purchase/box-form",function(t,e,r){var o,n,i,s=function(t,e){function r(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=e("core/controller"),i=e("libraries/custom-box"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.before=function(){return new i},e.prototype.run=function(){},e}(n),r.exports=o}),require.register("controllers/masterbox/customer/purchase/choose-frequency",function(t,e,r){var o,n,i=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=e("core/controller"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.before=function(){},e.prototype.run=function(){return this.on("click","label",this.smoothScroll)},e.prototype.smoothScroll=function(t){return smoothScroll.animateScroll(null,"#section")},e}(n),r.exports=o}),require.register("controllers/masterbox/customer/purchase/choose-spot",function(t,e,r){var o,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function r(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=e("core/controller"),o=function(t){function e(){return this.hideGoogleMap=i(this.hideGoogleMap,this),this.showGoogleMap=i(this.showGoogleMap,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.currentGoogleMap=!1,e.prototype.before=function(){var t;return $("input:checked").length>0?(t=$("input:checked").first().attr("id"),this.showGoogleMap(t)):void 0},e.prototype.run=function(){return this.on("click","label",function(t){return function(e){var r;return r=$(e.currentTarget).attr("for"),t.showGoogleMap(r)}}(this))},e.prototype.showGoogleMap=function(t){return t!==this.currentGoogleMap?(this.currentGoogleMapMap!==!1&&this.hideGoogleMap(this.currentGoogleMap),$("#gmap-"+t).stop().hide().removeClass("+hidden").fadeIn(),this.currentGoogleMap=t):void 0},e.prototype.hideGoogleMap=function(t){return $("#gmap-"+t).addClass("+hidden")},e}(n),r.exports=o}),require.register("controllers/masterbox/customer/purchase/delivery-mode",function(t,e,r){var o,n,i=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=e("core/controller"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.before=function(){},e.prototype.run=function(){return this.on("click","label",this.smoothScroll)},e.prototype.smoothScroll=function(t){return smoothScroll.animateScroll(null,"#section")},e}(o),r.exports=n}),require.register("controllers/masterbox/customer/purchase/payment",function(t,e,r){var o,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function r(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=e("core/controller"),n=function(t){function e(){return this.displayWriting=i(this.displayWriting,this),this.displayDefault=i(this.displayDefault,this),this.afterPayment=i(this.afterPayment,this),this.initStripe=i(this.initStripe,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.afterPaymentProcessing=!1,e.prototype.before=function(){return this.initStripe()},e.prototype.run=function(){return $("#trigger-payment").click(function(t){return function(e){return e.preventDefault(),$(t).prop("disabled")!==!0?(t.displayLoading("En cours de chargement"),t.handler.open({name:"Bordeaux in Box",description:"Commande Box",currency:"eur",amount:$("#gotham").data("amount"),email:$("#gotham").data("customer-email")})):void 0}}(this))},e.prototype.initStripe=function(){return this.handler=StripeCheckout.configure({key:_.getStripeKey(),image:"https://s3.amazonaws.com/stripe-uploads/acct_14e5CdIIyezb3ziumerchant-icon-1452677496121-bdxinbox.png",locale:"fr",token:this.afterPayment,allowRememberMe:!0,opened:function(t){return function(){return t.displayWriting()}}(this),closed:function(t){return function(){return setTimeout(function(){return t.afterPaymentProcessing?void 0:t.displayDefault()},1500)}}(this)})},e.prototype.afterPayment=function(t){var e;return e=t.id,this.afterPaymentProcessing=!0,this.displayLoading("En cours de redirection"),$("#stripe-token").val(e),$("#payment-form").submit()},e.prototype.displayLoading=function(t){return $("#trigger-payment").prop("disabled",!0).addClass("--disabled").html('<i class="fa fa-spinner fa-spin"></i> '+t)},e.prototype.displayDefault=function(){return $("#trigger-payment").prop("disabled",!1).removeClass("--disabled").html('<i class="fa fa-credit-card"></i> Procéder au paiement sécurisé')},e.prototype.displayWriting=function(){return $("#trigger-payment").prop("disabled",!0).addClass("--disabled").html("Saisie en cours")},e}(o),r.exports=n}),require.register("controllers/masterbox/guest/blog/article",function(t,e,r){var o,n,i=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=e("core/controller"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.before=function(){return $("#share").jsSocials({shares:["facebook","pinterest","twitter","email"],showCount:!0,showLabel:!0,text:$("#gotham").data("text"),facebook:{label:"Partager"},pinterest:{media:$("#gotham").data("pinterest-media")}})},e.prototype.run=function(){},e}(n),r.exports=o}),require.register("controllers/masterbox/guest/home/index",function(t,e,r){var o,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function r(){this.constructor=t}for(var o in e)a.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=e("core/controller"),n=function(t){function e(){return this.alertNoBoxes=i(this.alertNoBoxes,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.before=function(){return this.smoothScroll()},e.prototype.run=function(){return this.on("click",".js-no-boxes",this.alertNoBoxes)},e.prototype.alertNoBoxes=function(t){return t.preventDefault(),swal({title:$("#gotham").data("no-boxes-title"),text:$("#gotham").data("no-boxes-text"),type:"error",confirmButtonColor:"#D83F66",html:!0})},e.prototype.smoothScroll=function(){return smoothScroll.init({selector:".js-anchor"})},e}(o),r.exports=n}),require.register("controllers/masterbox/guest/home/spots",function(t,e,r){var o,n,i=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=e("core/controller"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.before=function(){},e.prototype.run=function(){return this.on("click","label",this.displayGoogleMap)},e.prototype.displayGoogleMap=function(){var t;return $("[id^=gmap]").addClass("+hidden"),t=$(this).attr("for"),$("#gmap-"+t).hasClass("+hidden")?$("#gmap-"+t).stop().hide().removeClass("+hidden").fadeIn():void 0},e}(o),r.exports=n}),require.register("core/bootstrap",function(t,e,r){var o;o=function(){function t(){}return t.prototype.run=function(){var t,r;return e("helpers"),e("validators"),e("boot"),t=$("#gotham").data("controller"),null==t||_.isEmpty(t)?void 0:(r=this._formatPath(t),t=e("controllers/"+r),t=new t,null!=t.before&&t.before(),t._gothamStop?void 0:t.run())},t.prototype._formatPath=function(t){return t.split(".").join("/")},t}(),r.exports=o}),require.register("core/controller",function(t,e,r){var o,n;n=e("core/view"),o=function(){function t(){}return t.prototype._gothamStop=!1,t.prototype.stop=function(){return this._gothamStop=!0},t.prototype.log=function(t){return console.log(t)},t.prototype.on=function(t,e,r){return $(e).on(t,r)},t.prototype.off=function(t,e,r){return $(e).off(t,r)},t.prototype.delayed=function(t,e,r){return $(document).on(t,e,r)},t.prototype.view=function(t,e){var r;return r=new n,r.render(t,e)},t}(),r.exports=o}),require.register("core/view",function(t,e,r){var o;o=function(){function t(){}return t.prototype.render=function(t,r){return t=t.split(".").join("/"),(t=e("views/"+t))(r)},t}(),r.exports=o}),require.register("helpers",function(t,e,r){var o;o=e("config"),_.mixin({getApp:function(){return $("body").data("app")}}),_.mixin({getEnvironment:function(){return $("body").data("environment")}}),_.mixin({getStripeKey:function(){return"production"===_.getEnvironment()?o.stripe.production:o.stripe.testing}}),_.mixin({slash:function(t){var e;return e=t.slice(-1),"/"===e?t:t+"/"}}),_.mixin({euro:function(t){return parseFloat(t).toFixed(2)+" &euro;"}}),_.mixin({profileStatus:function(t){switch(t){case"in-progress":return"En cours de création";case"expired":return"Expiré";case"not-subscribed":return"Non abonné";case"subscribed":return"Abonné";default:return t}}}),_.mixin({colorProfileStatusButton:function(t){switch(t){case"in-progress":return"--blue";case"expired":return"--red";case"not-subscribed":return"--red";case"subscribed":return"--green";default:return"--blue"}}})}),require.register("initialize",function(t,e,r){var o;o=e("core/bootstrap"),$(function(){var t;return t=new o({request:window.location.pathname}),t.run()})}),require.register("libraries/admin-sidebar",function(t,e,r){var o;o=function(){function t(){$("#sidebar").on("mouseenter",this.sidebarEnter),$("#sidebar").on("mouseleave",this.sidebarLeave)}return t.prototype.sidebarEnter=function(){return $(this).css("width","270px"),$("#sidebar-brand").css("display","block")},t.prototype.sidebarLeave=function(){return $(this).css("width","60px"),$("#sidebar-brand").css("display","none")},t}(),r.exports=o}),require.register("libraries/custom-box",function(t,e,r){var o,n=function(t,e){return function(){return t.apply(e,arguments)}};o=function(){function t(){this.cleanError=n(this.cleanError,this),this.showError=n(this.showError,this),this.fetchDatasQuestion=n(this.fetchDatasQuestion,this),this.fetchDatasCurrentQuestion=n(this.fetchDatasCurrentQuestion,this),this.showDefault=n(this.showDefault,this),this.showLoading=n(this.showLoading,this),this.isQuestionRadioButton=n(this.isQuestionRadioButton,this),
this.hasNextQuestion=n(this.hasNextQuestion,this),this.hideQuestion=n(this.hideQuestion,this),this.showQuestion=n(this.showQuestion,this),this.showNextQuestion=n(this.showNextQuestion,this),this.postAddAnswer=n(this.postAddAnswer,this),this.labelClicked=n(this.labelClicked,this),this.formSubmited=n(this.formSubmited,this),this.skipClicked=n(this.skipClicked,this),this.showQuestion(1,!1),this.currentQuestion=1,this.events()}return t.prototype.processingAjax=!1,t.prototype.events=function(){return $("form").on("submit",this.formSubmited),$(":radio").on("click",this.labelClicked),$(".js-skip").on("click",this.skipClicked)},t.prototype.skipClicked=function(t){return t.preventDefault(),this.processingAjax?void 0:this.showNextQuestion()},t.prototype.formSubmited=function(t){return t.preventDefault(),this.postAddAnswer()},t.prototype.labelClicked=function(t){return this.isQuestionRadioButton(this.currentQuestion)?this.processingAjax?t.preventDefault():this.postAddAnswer():void 0},t.prototype.postAddAnswer=function(){var t;return this.processingAjax?void 0:(this.showLoading(),this.cleanError(),t=this.fetchDatasCurrentQuestion(),console.log(t),this.processingAjax=!0,$.post("/service/api/box-question-customer-answer",t,function(t){return function(e){return t.processingAjax=!1,t.showDefault(),e.success?t.showNextQuestion():t.showError(e.errors)}}(this)))},t.prototype.showNextQuestion=function(){return this.hasNextQuestion(this.currentQuestion)?(this.hideQuestion(this.currentQuestion),this.showQuestion(this.currentQuestion+1),this.currentQuestion=this.currentQuestion+1):(this.showLoading(),window.location.href="/customer/purchase/confirmed")},t.prototype.showQuestion=function(t,e){return e===!1?$("[id=question-"+t+"]").removeClass("+hidden"):$("[id=question-"+t+"]").fadeIn().removeClass("+hidden")},t.prototype.hideQuestion=function(t){return $("[id=question-"+t+"]").addClass("+hidden")},t.prototype.hasNextQuestion=function(t){var e;return e=t+1,$("[id=question-"+e+"]").length>0?!0:!1},t.prototype.isQuestionRadioButton=function(t){var e;return e=$("#question-"+t).data("type"),"radiobutton"===e?!0:!1},t.prototype.showLoading=function(){return this.isQuestionRadioButton(this.currentQuestion)?$("#question-"+this.currentQuestion).find("#loader").html('<i class="fa fa-spin fa-circle-o-notch"></i> En cours d\'enregistrement'):$("#question-"+this.currentQuestion).find("button").prop("disabled",!0).addClass("--disabled").html('<i class="fa fa-spin fa-circle-o-notch"></i> Suivant'),$("#question-"+this.currentQuestion).find(".js-skip").addClass("--disabled")},t.prototype.showDefault=function(){return this.isQuestionRadioButton(this.currentQuestion)?$("#question-"+this.currentQuestion).find("#loader").html(""):$("#question-"+this.currentQuestion).find("button").prop("disabled",!1).removeClass("--disabled").html("Suivant"),$("#question-"+this.currentQuestion).find(".js-skip").removeClass("--disabled")},t.prototype.fetchDatasCurrentQuestion=function(){return this.fetchDatasQuestion(this.currentQuestion)},t.prototype.fetchDatasQuestion=function(t){var e;return e=new Syphon,e.get("#question-"+t+" form")},t.prototype.showError=function(t){return $("#question-"+this.currentQuestion).find("#error").html(t)},t.prototype.cleanError=function(){return $("#question-"+this.currentQuestion).find("#error").html("")},t}(),r.exports=o}),require.register("validators",function(t,e,r){Validator.errors({required:"Le champ :attribute est requis",valid_card_number:"Numéro de carte invalide",valid_card_expiry:"Date d'expiration invalide",valid_card_cvc:"Code de vérification invalide"}),Validator.attributes({card:"numéro de carte",expiration:"date d'expiration",ccv:"cvv"}),Validator.rule("valid_card_number",function(t,e,r){return $.payment.validateCardNumber(e)?!0:!1}),Validator.rule("valid_card_expiry",function(t,e,r){var o;return o=e.split("/"),$.payment.validateCardExpiry(o[0],o[1])?!0:!1}),Validator.rule("valid_card_cvc",function(t,e,r){return $.payment.validateCardCVC(e)?!0:!1})}),require.register("views/masterbox/admin/customers/actions",function(t,e,r){var o=function(t){t||(t={});var e,r=[],o=t.safe,n=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},n||(n=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){r.push('<a href="'),r.push(this.link_focus),r.push('" class="button button__default --green --table"><i class="fa fa-search"></i></a>\n<a href="'),r.push(this.link_edit),r.push('" class="button button__default --blue --table"><i class="fa fa-pencil"></i></a>\n')}).call(this)}.call(t),t.safe=o,t.escape=n,r.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/masterbox/admin/customers/more",function(t,e,r){var o=function(t){t||(t={});var e,r=[],o=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?i(t):""},n=t.safe,i=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,n,i;if(r.push('<div class="tablechild">\n  <div class="row">\n    <div class="grid-6">\n      <h3 class="tablechild__title">A propos</h3>\n      <strong>Total Payé:</strong> '),r.push(_.euro(this.turnover)),r.push("<br/>\n      <strong>Adresse:</strong> \n      "),this.address.length>0?(r.push("\n        "),r.push(this.address),r.push(", "),r.push(this.city),r.push(" ("),r.push(this.zip),r.push(")\n      ")):r.push("\n        N/A\n      "),r.push('\n    </div>\n    <div class="grid-6">\n      <h3 class="tablechild__title">Abonnements</h3>\n      '),this.profiles.length>0){for(r.push("\n        "),i=this.profiles,t=0,e=i.length;e>t;t++)n=i[t],r.push('\n          <a class="tablechild__link" href="'),r.push(_.slash(this.focus_profile)+n.id),r.push('">Abonnement #'),r.push(o(n.id)),r.push(" ("),r.push(_.profileStatus(n.status)),r.push(")</a><br/>\n        ");r.push("\n      ")}else r.push("\n        Aucun abonnement\n      ");r.push("\n    </div>\n  </div>\n</div>")}).call(this)}.call(t),t.safe=n,t.escape=i,r.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/masterbox/admin/customers/render_subscriptions",function(t,e,r){var o=function(t){t||(t={});var e,r=[],o=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?i(t):""},n=t.safe,i=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var t,e,n,i;if(this.profiles.length>0){for(r.push("\n  "),i=this.profiles,t=0,e=i.length;e>t;t++)n=i[t],r.push('\n\n    <a class="button button__default --table '),r.push(o(_.colorProfileStatusButton(n.status))),r.push('" href="'),r.push(_.slash(this.focus_profile)+n.id),r.push('">#'),r.push(o(n.id)),r.push(" ("),r.push(_.profileStatus(n.status)),r.push(")</a><br/>\n    \n  ");r.push("\n")}else r.push("\n  Aucun abonnement\n")}).call(this)}.call(t),t.safe=n,t.escape=i,r.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/masterbox/admin/profiles/actions",function(t,e,r){var o=function(t){t||(t={});var e,r=[],o=t.safe,n=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},n||(n=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){r.push('<a href="'),r.push(this.link_focus),r.push('" class="button button__default --green --table"><i class="fa fa-search"></i></a>\n<a href="'),r.push(this.link_delete),r.push('" class="button button__default --red --table js-confirm-delete"><i class="fa fa-trash-o"></i></a>')}).call(this)}.call(t),t.safe=o,t.escape=n,r.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/masterbox/admin/profiles/more",function(t,e,r){var o=function(t){t||(t={});var e,r=[],o=t.safe,n=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},n||(n=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){r.push('<div class="tablechild">\n  <div class="row">\n    <div class="grid-3">\n      <h3 class="tablechild__title">Abonnement</h3>\n      <strong>Date de création:</strong> '),r.push(this.created_at),r.push('<br/>\n    </div>\n    <div class="grid-6">\n      <h3 class="tablechild__title">Client</h3>\n      <strong>Total Payé:</strong> '),r.push(_.euro(this.customer.turnover)),r.push("<br/>\n      <strong>Téléphone:</strong> \n      "),this.customer.phone_format.length>0?(r.push("\n        "),r.push(this.customer.phone_format),r.push("\n      ")):r.push("\n        N/A\n      "),r.push("\n      <br/>\n      <strong>Email:</strong> "),r.push(this.customer.email),r.push("<br/>\n      <strong>Adresse:</strong> \n      "),this.customer.address.length>0?(r.push("\n        "),r.push(this.customer.address),r.push(", "),r.push(this.customer.city),r.push(" ("),r.push(this.customer.zip),r.push(")\n      ")):r.push("\n        N/A\n      "),r.push("\n    </div>\n</div>")}).call(this)}.call(t),t.safe=o,t.escape=n,r.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/masterbox/admin/profiles/payments/more",function(t,e,r){var o=function(t){t||(t={});var e,r=[],o=t.safe,n=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},n||(n=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){r.push('<div class="tablechild">\n  <h3 class="tablechild__title">Stripe</h3>\n  <strong>Customer:</strong> '),r.push(this.stripe_customer),r.push("<br/>\n  <strong>Event:</strong> "),r.push(this.stripe_event),r.push("<br/>\n  <strong>Charge:</strong> "),r.push(this.stripe_charge),r.push("<br/>\n  <strong>Card:</strong> "),r.push(this.stripe_card),r.push("<br/>\n</div>\n\n")}).call(this)}.call(t),t.safe=o,t.escape=n,r.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)});